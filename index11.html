<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;800&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/4a32509195.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <meta charset="UTF-8">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Buscastaller/Login</title>
    <link rel="stylesheet" href="BL.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="Images\Logos/Simple-Icon-Red.webp">
    <style type="text/css"></style>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js"></script>
    <script>
       import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyC_E3Nyd0XNXjO2MkSmlWtiYyS6RZ5Meoc",
  authDomain: "buscastaller-c2a1c.firebaseapp.com",
  projectId: "buscastaller-c2a1c",
  storageBucket: "buscastaller-c2a1c.appspot.com",
  messagingSenderId: "610457430213",
  appId: "1:610457430213:web:aaa390e1d9656561af28ac",
  measurementId: "G-Y5LC3RRD6Q"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
    </script>

</head>
<body>
    <header>
      <nav>
        <div class="nav-logo">
            <img src="Images\Logos\Full-Logo-White-Red-hollow.webp">
        </div>
        
        <span>.</span>
      </nav>
        
    </header>        

    <main>
      <section class="Login-block" id="Login-block">
        <div class="Login-block-banner">
            <div class="Login-block-banner-logo">
              <img src="Images\Logos\Simple-Icon-Red.webp">
            </div>
            <div class="Login-block-banner-text">
              <h1>Bienvenido</h1>
            </div>
        </div>
        <form id="login-form">
            <div class="Input-Section">
                <div class="input-Block">
                      <div class="alert">
                        <span class="alertU" id="alertU"></span>
                      </div>
                      <div class="labeBlock">
                           <label for="name">Nombre del Usuario</label>
                      </div>
                      <div class="Input-bar">
                          <i class="fa-regular fa-envelope" style="color: #911c35;"></i>
                          <input type="email" name="name" class="name" autocomplete="off" id="name" placeholder="ejemplo@gmail.com" required> 
                      </div>
                </div>
                <div class="input-Block">
                  <div class="alert">
                    <span class="alertP" id="alertP"></span>
                  </div>
                  <div class="labeBlock">
                     <label for="password">Contraseña</label>
                  </div>
                  <div class="Input-bar">
                      <i class="fa-solid fa-lock" style="color: #911c35;"></i>
                      <input type="password" name="password" class="password" autocomplete="off" id="password" placeholder="***********" required> 
                  </div>
                  <span id="result"></span>
                </div>
            </div>    
            <div class="forgotBlock" id="PW-Btn">
                <a>Olvidé mi Contraseña</a>
            </div>
            <div class="bottomBlock">
              <div class="inscribBlock">
                  <h2>Inscribirse:</h2>
                <div class="inscribBlocklinks">
                    <div class="inscrib-Block-links-btn">
                      <a class="btn" id="user">
                        <i class="fa-solid fa-user" style="color: #ae1d39;"></i>
                        Usuario
                      </a>
                    </div>
                    <div class="inscrib-Block-links-btn">
                      <a class="btn" id="repair">
                        <i class="fa-solid fa-screwdriver-wrench" style="color: #ae1d39;"></i>
                        Taller
                      </a>
                    </div>
                </div>
              </div>
              <div class="log-in-submit">
                <input type="submit" id="submit-btn" class="submit-btn"> 
              </div>
            </div>
        </form>
      </section>
      <section class="Olvidé-Contraseña-block" id="OCBlock">
        <h1>¿Olvidaste tu contraseña?</h1>
        <p>No te preocupes. Ingresa el correo electrónico de tu cuenta y te enviaremos un enlace para restablecerla.</p>
        <form action="https://formsubmit.co/formt@buscastaller.com" method="POST">
          <div class="form-block-FP">
              <div class="FP-Email-input">
                <span class="alertE" id="alertE"></span>
                <input type="email" name="email" class="email" autocomplete="off" id="email" placeholder="Correo Electrónico" required>  
              </div>
              <div class="Forgot-submit-block">
                <input type="submit" id="FP-submit-btn" class="Reg-submit-btn" required> 
              </div>
          </div>
        </form>
        <button id="hidBtn">Volver al inicio de sesión.</button>
      </section>
      <!-- Add the other sections here -->
    </main>

    <script src="BL.js" type="module"></script>   

    <script>
      document.getElementById('login-form').addEventListener('submit', function(event) {
          event.preventDefault();
          const email = document.getElementById('name').value;
          const password = document.getElementById('password').value;

          firebase.auth().signInWithEmailAndPassword(email, password)
              .then((userCredential) => {
                  // Signed in
                  const user = userCredential.user;
                  // Redirect to homepage
                  window.location.href = 'index.html';
              })
              .catch((error) => {
                  const errorCode = error.code;
                  const errorMessage = error.message;
                  // Display error message
                  document.getElementById('result').innerText = errorMessage;
              });
      });

      // Firebase Authentication State Observer
      firebase.auth().onAuthStateChanged((user) => {
          if (user) {
              // User is signed in.
              window.location.href = 'index.html';
          }
      });

      // Add more Firebase authentication related code here as needed
      // Import the functions you need from the SDKs you need

  </script>
</body>
</html>